{
    "Changes": [
        {
            "Action": "EditData",
            "Target": "Data/TriggerActions",
            "Entries": {
                "{{ModId}}_RightInTheKisser": {
                    "Id": "{{ModId}}_RightInTheKisser",
                    "Trigger": "Spiderbuttons.BETAS_NpcKissed",
                    "Condition": "ITEM_ID Target \"Lance\", DAY_OF_MONTH {{Random:{{Range: 1, 28}}}}",
                    "Actions": [
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:Lance.Kissed_{{Random:{{Range: 0, 5}}}}}}\" true",
                        "MarkActionApplied Current {{ModId}}_RightInTheKisser false"
                    ]
                },
                "{{ModId}}_RightInTheKisser2": {
                    "Id": "{{ModId}}_RightInTheKisser2",
                    "Trigger": "Spiderbuttons.BETAS_NpcKissed",
                    "Condition": "ITEM_ID Target \"Lance\", PLAYER_HAS_MAIL {{ModId}}_SPICY12, DAY_OF_MONTH {{Random:{{Range: 1, 28}}}}",
                    "Actions": [
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:Lance.SPICY_{{Random:{{Range: 0, 5}}}}}}\" true",
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:Lance.MODERATE_{{Random:{{Range: 0, 5}}}}}}\" true",
                        "MarkActionApplied Current {{ModId}}_RightInTheKisser2 false"
                    ]
                },
                "{{ModId}}_RightInTheKisser3": {
                    "Id": "{{ModId}}_RightInTheKisser3",
                    "Trigger": "Spiderbuttons.BETAS_NpcKissed",
                    "Condition": "ITEM_ID Target \"Lance\", PLAYER_HAS_MAIL {{ModId}}_MODERATE12, DAY_OF_MONTH {{Random:{{Range: 1, 28}}}}",
                    "Actions": [
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:Lance.MODERATE_{{Random:{{Range: 0, 5}}}}}}\" true",
                        "MarkActionApplied Current {{ModId}}_RightInTheKisser3 false"
                    ]
                },

                "{{ModId}}_BeardYes": {
                    "Id": "{{ModId}}_BeardYes",
                    "Trigger": "Spiderbuttons.BETAS_DialogueOpened",
                    "Condition": "ITEM_ID Target \"Lance\", PLAYER_HAS_MAIL Current {{ModId}}_YesBeard",
                    "Actions": [
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:YesBeard}}\" true",
                        "RemoveMail Current {{ModId}}_BeardYes all",
                        "MarkActionApplied Current {{ModId}}_BeardYes false"
                    ]
                },
                "{{ModId}}_BeardNo": {
                    "Id": "{{ModId}}_BeardNo",
                    "Trigger": "Spiderbuttons.BETAS_DialogueOpened",
                    "Condition": "ITEM_ID Target \"Lance\", PLAYER_HAS_MAIL Current {{ModId}}_NoBeard",
                    "Actions": [
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:NoBeard}}\" true",
                        "RemoveMail Current {{ModId}}_BeardNo all",
                        "MarkActionApplied Current {{ModId}}_BeardNo false"
                    ]
                },
                "{{ModId}}_WipeCheck": {
                    "Id": "{{ModId}}_WipeCheck",
                    "Trigger": "Spiderbuttons.BETAS_RelationshipChanged",
                    "Condition": "ITEM_ID Target \"Lance\", Spiderbuttons.BETAS_ITEM_MOD_DATA_CONTAINS Target BETAS/RelationshipChanged/WasMemoryWiped true",
                    "Actions": [
                        "AddMail Current {{ModId}}_LanceWiped received"
                    ]
                },
                "{{ModId}}_EarringConversation": {
                    "Id": "{{ModId}}_EarringConversation",
                    "Trigger": "Spiderbuttons.BETAS_DialogueOpened",
                    "Condition": "ITEM_ID Target \"Lance\", PLAYER_HAS_MAIL Current {{ModId}}_wearEarrings Received",
                    "Actions": [
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:wearEarrings}}\" true"
                    ]
                },
                "{{ModId}}_EarringConversation2": {
                    "Id": "{{ModId}}_EarringConversation2",
                    "Trigger": "Spiderbuttons.BETAS_DialogueOpened",
                    "Condition": "ITEM_ID Target \"Lance\", PLAYER_HAS_MAIL Current {{ModId}}_wearEarrings Received, {{Query:TheMightyAmondee.CustomTokens/YearsMarried}} > 1",
                    "Actions": [
                        "Spiderbuttons.BETAS_SetNewDialogue \"Lance\" \"{{i18n:WearEarring.01}}\" true"
                    ]
                },
                // change this one to remove all of the qi flags as soon as the player gifts the replay qi event item
                "{{ModId}}_LanceQiEvents": {
                    "Id": "{{ModId}}_LanceQiEvents",
                    "Trigger": "Spiderbuttons.BETAS_GiftGiven",
                    "Condition": "ITEM_ID Target \"Lance\", ITEM_ID Target Aviroen.LanceExpanded_QiMomento",
                    "Actions": [
                        "MarkEventSeen Current LanceQi false",
                        "MarkEventSeen Current LEQiAdventurer false",
                        "MarkEventSeen Current LEQiPost false",
                        "MarkEventSeen Current LEQiPost1 false",
                        "MarkEventSeen Current LEQiPost2 false",
                        "MarkEventSeen Current LEQiPost3 false",
                        "MarkEventSeen Current LEQiPost4 false",
                        "MarkActionApplied Current {{ModId}}_LanceQiEvents false"
                    ]
                }
            }
        }
    ]
}
